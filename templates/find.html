{% extends "base.html" %}
{% block title %}mamut.cool{% endblock %}
{% block head %}
    {{ super() }}
    <style type="text/css">
        .important { color: #336699; }
    </style>
{% endblock %}
{% block content %}
<div class="content div-recherche">
<h2>Rechercher</h2>
<form id= "form-search" action="/geofind" method="get">
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text">Adresse</span>
    </div>
    <input type="text" class="form-control" id="address" name="address"
    {% if response.address %} value="{{ response.address }}" {% endif %} >
  </div>
  <div class="div-buttons clearfix">
    <button type="submit" class="btn btn-primary">Rechercher</button>
    <button type="button" onclick="autourDeMoi()" class="btn btn-primary">Autour de moi</button>
  </div>
</form>
<h2>Recherche par Mot Clef</h2>
<form id= "form-search-words" action="/textfind" method="get">
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text">Adresse</span>
    </div>
    <input type="text" class="form-control" id="address" name="words"
    {% if response.words %} value="{{ response.words }}" {% endif %} >
  </div>
  <div class="div-buttons clearfix">
    <button type="submit" class="btn btn-primary">Rechercher</button>
  </div>
</form>
<sr/>
</div>
{% if response.pages %}
<div class="content div-reponse">
  <h2>RÃ©ponses</h2>
  {% for page in response.pages %}
  <div class="card margin5">
    <div class="card-header"> <a href="{{ page.url }}">{{ page.title }}</a> </div>
  </div>
  {% endfor %}
</div>
{% endif %}

<script>

function submitPosition(position) {
  /*
  document.getElementById("address").value = '';
  document.getElementById("lat").value = position.coords.latitude;
  document.getElementById("lng").value = position.coords.longitude;
  document.getElementById("form-search").submit() ;
  */
  document.location.href = '/geofind?lat='+position.coords.latitude+'&lng='+position.coords.longitude;
}

function autourDeMoi(){
  console.log("getCoords")
  if(navigator.geolocation)
    navigator.geolocation.getCurrentPosition(submitPosition);
}

</script>
{% endblock %}
